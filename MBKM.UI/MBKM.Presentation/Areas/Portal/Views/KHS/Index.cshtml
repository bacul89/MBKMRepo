﻿
@{ ViewBag.Title = "KHS";
    Layout = "~/Areas/Portal/Views/Shared/_LayoutHome.cshtml"; }


<style>
    .box {
        border: solid 1px coral;
        padding: 15px 25px;
        margin: 15px 0px;
    }

    .footnote {
        margin: 0 20%;
    }

    table.footer tr td {
        text-align: center;
    }

    th {
        background: #fff;
        padding: 15px 0px;
        font-size: 13px;
    }
</style>

<div class="container-fluid" style="padding: 0px">
    <div class="card center-block" style="background-color: white; width: 100%; padding: 0px">
        <div class="card-body responsive-content" style="box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2); border: 3px solid coral; padding: 0px">
            <h4 class="card-title" style="padding-top: 30px; padding-right: 20px; padding-left: 30px; font-weight: bold; font-size: 30px; color: black;">
                KHS<br />
            </h4>
            <hr />

            <div class="container" style="width: 100%;">
                <button target="_blank" class="btn btn-success" onclick="KHSPage($('#tahunSemester').text(),$('#tahunSemester').val())"> Cetak <span class="fa fa-download"></span></button>
                @*<div class="col" style="text-align:center"><a target="_blank" href="javascript:void(0)" style="color:black" onclick="PrintKHS($('#tahunSemester').text(),$('#tahunSemester').val())"><span class="fa fa-download"></span></a></div>*@
                <div class="col" style="text-align:center"><a target="_blank" onclick="location.href='@Url.Action("PrintKHS", "KHS")?strmT=' + $('#tahunSemester').text() + '&strmID=' + $('#tahunSemester').val()" style="color:black"><i class="fas fa-file-download coral"></i></i></a></div>
                <br />
                <br />

                <div class="box col-md-6">
                    <table hidden class="table" style="width: auto;">
                        <tr>
                            <td style="text-align: right">Tahun Semester</td>
                            <td style="width: 400px;">
                                <select name="tahunSemester" id="tahunSemester" class="form-control input-md"></select>
                            </td>
                        </tr>
                    </table>
                    <table>
                        <tr>
                            <td>SEMESTER</td>
                            <td style="padding:5px"> : </td>
                            <td id="semester"></td>
                        </tr>
                        <tr>
                        </tr>
                        <tr>
                            <td>NIM</td>
                            <td style="padding:5px"> : </td>
                            <td id="nim"></td>
                        </tr>
                        <tr>
                            <td>NAMA</td>
                            <td style="padding:5px"> : </td>
                            <td id="name"></td>
                        </tr>
                        <tr>
                            <td>UNIVERSITAS ASAL</td>
                            <td style="padding:5px"> : </td>
                            <td id="univ"></td>
                        </tr>
                    </table>






                </div>
                <div class=" col-md-2">
                </div>

                <div class="box col-md-4">
                    <table>




                        <tr>
                            <td>A</td>
                            <td style="padding:3px"> = </td>
                            <td id="nA">4.00</td>
                            <td style="padding-left: 60px"> M = MUNDUR (WITHDRAWN)</td>


                        </tr>

                        <tr>
                            <td>A-</td>
                            <td style="padding:3px;padding-right:5px"> = </td>
                            <td id="nAm">3.70</td>
                            @*<td style="padding-left: 100px; padding-top: -10px"> WITHDRAWn</td>*@
                        </tr>
                        <tr>
                            <td>B+</td>
                            <td style="padding:3px"> = </td>
                            <td id="nBp">3.30</td>
                            <td style="padding-left:60px"> R = CEKAL (BARRED)</td>
                        </tr>
                        <tr>
                            <td>B</td>
                            <td style="padding:3px"> = </td>
                            <td id="nB">3.00</td>
                            @*<td style="padding-left:100px"> BARRED</td>*@
                        </tr>
                        <tr>
                            <td>B-</td>
                            <td style="padding:3px"> = </td>
                            <td id="nBm">2.70</td>
                            <td style="padding-left:60px"> S = SAKIT (SICK)</td>
                        </tr>
                        <tr>
                            <td>C+</td>
                            <td style="padding:3px"> = </td>
                            <td id="nCp">2.30</td>
                            @*<td style="padding-left:100px"> SICK</td>*@
                        </tr>
                        <tr>
                            <td>C</td>
                            <td style="padding:3px"> = </td>
                            <td id="nC">2.00</td>
                            <td style="padding-left:60px"> T = TUNDA (POSTPONED)</td>
                        </tr>
                        <tr>
                            <td>D</td>
                            <td style="padding:3px"> = </td>
                            <td id="nD">1.00</td>
                            @*<td style="padding-left:100px"> POSTPONED</td>*@
                        </tr>
                        <tr>
                            <td>E</td>
                            <td style="padding:3px"> = </td>
                            <td id="nE">0</td>
                        </tr>

                    </table>
                </div>
                <div>

                </div>
                <table hidden width="100%" class="table table-bordered table-striped hover dt-responsive responsive">
                    <thead>
                        <tr>
                            <th width="10%">NO</th>
                            <th width="40%">KODE MATA KULIAH</th>
                            <th width="10%">SEKSI</th>
                            <th width="10%">SKS(K)</th>
                            <th width="10%">NILAI(N)</th>
                            <th width="10%">HASIL(N X K)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>mkasd</td>
                            <td>A</td>
                            <td>3</td>
                            <td>A</td>
                            <td>14.00</td>
                        </tr>
                    </tbody>
                </table>
                @*<div style="overflow-x: auto;">*@
                <div>
                    <table id="jadwalKuliah" class="table table-bordered table-spacing js-basic-example dataTable display nowrap">
                        <thead>
                            <tr>

                                <th class="zero-padding no-border vertical-center sorting">No.</th>

                                <th class="zero-padding no-border vertical-center sorting">Kode Mata Kuliah</th>
                                <th class="zero-padding no-border vertical-center sorting">Nama Mata Kuliah</th>
                                <th class="zero-padding no-border vertical-center sorting">Seksi</th>
                                <th class="zero-padding no-border vertical-center sorting">SKS</th>
                                <th class="zero-padding no-border vertical-center sorting">Nilai</th>
                                <th class="zero-padding no-border vertical-center sorting">Hasil</th>
                                @*<th class="zero-padding no-border vertical-center sorting">Hari</th>*@
                                @*<th class="zero-padding no-border vertical-center sorting">Waktu</th>*@
                                @*<th class="zero-padding no-border vertical-center sorting">Seksi</th>*@
                                @*<th class="zero-padding no-border vertical-center sorting">Ruang Kelas</th>*@

                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>



            </div>



        </div>
    </div>
</div>





@section scripts{
    <script>
         var semesters = @Html.Raw(Json.Encode(Model));
        var semestersAsList = [];
        var datatable;
        $(document).ready(function () {
             $('#name').html("@ViewData["nama"].ToString()");
             $('#nim').html("@ViewData["nim"].ToString()");
             $('#univ').html("@ViewData["univ"].ToString()");
            for (var key in semesters) {
                var tmp = new Object();
                tmp.id = key;
                tmp.text = semesters[key];
                semestersAsList.push(tmp);
            }
            $("#tahunSemester").select2({
                placeholder: "-- Pilih Semester --",
                data: semestersAsList
            });
            $("#tahunSemester").change(function () {
                loadTable($("#tahunSemester").val());
            });
            //$("semester").val($("#tahunSemester").val());
            $('#semester').html($("#tahunSemester").text());
            //alert(semesters);
            console.log(semesters);
            loadTable($("#tahunSemester").val());
        });
        function loadTable(strm) {
            if (!strm) {
                strm = 0;
            }
            datatable = $('#jadwalKuliah').DataTable({
                ajax: {
                    url: '@Url.Action("GetJadwalKuliah", "KHS")?strm=' + strm,
                    dataSrc: ''
                },
                "columnDefs": [{
                    "searchable": false,
                    "orderable": false,
                    "targets": 0
                }],
                "order": [
                    [0, 'asc']
                ],
                "columns": [

                    {
                        "data": null
                    },
                    {
                        "data": "KodeMataKuliah",
                        "render": function (data, type, row, meta) {
                            return '<div class="center">' + data + '</div>';
                        }
                    },
                    {
                        "data": "NamaMataKuliah",
                        "render": function (data, type, row, meta) {
                            return '<div class="center">' + data + '</div>';
                        }
                    },
                    {
                        "data": "Seksi",
                        "render": function (data, type, row, meta) {
                            return '<div class="center">' + data + '</div>';
                        }
                    },
                    {
                        "data": "SKS",
                        "render": function (data, type, row, meta) {
                            return '<div class="center">' + data + '</div>';
                        }
                    },
                    {
                        "data": "Presetanse", //presensi
                        "render": function (data, type, row, meta) {
                            return '<div class="center">' + data + '</div>';
                        }
                    },
                    {
                        "data": "Hasil",//hasil
                        "render": function (data, type, row, meta) {
                            return '<div class="center">' + data + '</div>';
                        }
                    }
                    //{
                    //    "data": "JadwalKuliahs.Hari",
                    //    "render": function (data, type, row, meta) {
                    //        return '<div class="center">' + data + '</div>';
                    //    }
                    //},
                    //{
                    //    "data": "JadwalKuliahs.JamMasuk",
                    //    "render": function (data, type, row, meta) {
                    //        return '<div class="center">' + data + ' - ' + row.JadwalKuliahs.JamSelesai + '</div>';
                    //    }
                    //},
                    //{
                    //    "data": "JadwalKuliahs.ClassSection",
                    //    "render": function (data, type, row, meta) {
                    //        return '<div class="center">' + data + '</div>';
                    //    }
                    //},
                    //{
                    //    "data": "JadwalKuliahs.RuangKelas",
                    //    "render": function (data, type, row, meta) {
                    //        return '<div class="center">' + data + '</div>';
                    //    }
                    //},

                ]
            });
            datatable.on('order.dt search.dt', function () {
                datatable.column(0, { search: 'applied', order: 'applied' }).nodes().each(function (cell, i) {
                    cell.innerHTML = i + 1;
                });
            }).draw();
        }

        //batas
        function KHSPage(strmT,strmID) {

            //console.log();
           // @Url.Action("detailBAP", "SummaryPresensiKelas")
            //$.LoadingOverlay("show");
           // window.
            $.ajax({
                url: '@Url.Action("KHS", "KHS")?strmT=' + strmT + '&strmID=' + strmID,
                //url: '@Url.Action("GetJadwalKuliah", "PresensiKelas")?strm=' + strm,
                type: 'get',
                datatype: 'html',
                success: function (data) {
                    //$.LoadingOverlay("hide");
                    //console.log(data);
                    window.location = "/Portal/KHS/KHS?strmT=" + strmT + '&strmID=' + strmID



                }, error: function (e) {
                   // $.LoadingOverlay("hide");
                   alert("error")

                }
            })

        }
    </script>

}